<!DOCTYPE html>
<html>
<head>
  <title>Vegetables Shop</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <%# Prevents cross-site request forgery attacks %>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%# Generates link tag to application stylesheet %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>

  <%= javascript_include_tag "i18n" %>
  <%= javascript_include_tag "translations", skip_pipeline: true %>

  <%= javascript_pack_tag 'locale_switcher', 'data-turbolinks-track': 'reload' %>

  <%# Generates script tag to load application scripts %>
  <%= javascript_importmap_tags %>

</head>

<body>
<%= render 'layouts/header' %>

<section class="content">
  <nav class="side_nav">
    <div id="cart" class="carts">
      <%# Using Partials and Helper to render cart %>
      <%= render_if @cart && @cart.line_items.any?, @cart %>
    </div>

    <% if session[:user_id] %>
      <nav class="logged_in_nav">
        <ul>
          <li><%= link_to 'Orders', orders_path %></li>
          <li><%= link_to 'Products', products_path %></li>
          <li><%= link_to 'Users', users_path %></li>
          <li><%= button_to 'Logout', logout_path, method: :delete %></li>
        </ul>
      </nav>
    <% end %>
  </nav>

  <main class="<%= controller.controller_name %>">
    <%# Used by components to render views %>
    <%= yield %>
  </main>
</section>
<%= render 'layouts/footer' %>
</body>
</html>
